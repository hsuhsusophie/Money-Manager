import{d as S,f as k,g,c as d,a as o,t as f,o as p,_ as x,n as E,F as b,r as w,h as P,u as A,i as V}from"./index-br766j4-.js";const L={class:"month-selector"},Y={class:"month-display"},N={class:"month-text"},B=["disabled"],D=S({__name:"MonthSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(M,{emit:i}){const u=M,h=i,m=k(u.modelValue),a=g(()=>{const[n,t]=m.value.split("-");return`${n}Âπ¥${["‰∏ÄÊúà","‰∫åÊúà","‰∏âÊúà","ÂõõÊúà","‰∫îÊúà","ÂÖ≠Êúà","‰∏ÉÊúà","ÂÖ´Êúà","‰πùÊúà","ÂçÅÊúà","ÂçÅ‰∏ÄÊúà","ÂçÅ‰∫åÊúà"][parseInt(t)-1]}`}),l=g(()=>{const n=new Date,t=n.getFullYear(),r=n.getMonth()+1,[c,_]=m.value.split("-");return parseInt(c)===t&&parseInt(_)===r}),s=()=>{const[n,t]=m.value.split("-");let r=parseInt(n),c=parseInt(t)-1;c===0&&(c=12,r-=1);const _=String(c).padStart(2,"0"),v=`${r}-${_}`;m.value=v,h("update:modelValue",v)},e=()=>{if(l.value)return;const[n,t]=m.value.split("-");let r=parseInt(n),c=parseInt(t)+1;c===13&&(c=1,r+=1);const _=String(c).padStart(2,"0"),v=`${r}-${_}`;m.value=v,h("update:modelValue",v)};return(n,t)=>(p(),d("div",L,[o("div",Y,[o("button",{class:"nav-btn",onClick:s},t[0]||(t[0]=[o("span",null,"‚Äπ",-1)])),o("div",N,f(a.value),1),o("button",{class:"nav-btn",onClick:e,disabled:l.value},t[1]||(t[1]=[o("span",null,"‚Ä∫",-1)]),8,B)])]))}}),F=x(D,[["__scopeId","data-v-e3da372d"]]),j={class:"monthly-summary"},O={class:"summary-card"},R={class:"summary-item"},T={class:"amount income"},X={class:"summary-item"},z={class:"amount expense"},U={class:"summary-item"},W=S({__name:"MonthlySummary",props:{totalIncome:{},totalExpense:{},balance:{}},setup(M){return(i,u)=>(p(),d("div",j,[o("div",O,[o("div",R,[u[0]||(u[0]=o("span",{class:"label"},"Êî∂ÂÖ•",-1)),o("span",T,"$"+f(i.totalIncome.toLocaleString()),1)]),o("div",X,[u[1]||(u[1]=o("span",{class:"label"},"ÊîØÂá∫",-1)),o("span",z,"$"+f(i.totalExpense.toLocaleString()),1)]),o("div",U,[u[2]||(u[2]=o("span",{class:"label"},"ÁµêÈ§ò",-1)),o("span",{class:E(["amount balance",{negative:i.balance<0}])}," $"+f(i.balance.toLocaleString()),3)])])]))}}),Z=x(W,[["__scopeId","data-v-03afd6ca"]]),q={class:"category-pie-chart"},G={class:"chart-container"},H={key:0,width:200,height:200,class:"pie-chart",viewBox:"0 0 200 200",style:{overflow:"visible"}},J=["d","fill"],K=["x","y","fill"],Q={key:1,class:"no-data"},tt={class:"legend"},et={class:"legend-label"},nt={class:"legend-percentage"},ot=S({__name:"CategoryPieChart",props:{categoryStats:{},totalExpense:{}},setup(M){const i=M,u=g(()=>{if(i.totalExpense===0)return[];const a=100,l=100;let s=-90;return i.categoryStats.map(e=>{const t=e.amount/i.totalExpense*360,r=s+t,c=a+l*Math.cos(s*Math.PI/180),_=a+l*Math.sin(s*Math.PI/180),v=a+l*Math.cos(r*Math.PI/180),y=a+l*Math.sin(r*Math.PI/180),$=t>180?1:0,I=[`M ${a} ${a}`,`L ${c} ${_}`,`A ${l} ${l} 0 ${$} 1 ${v} ${y}`,"Z"].join(" ");return s=r,{path:I,color:e.color}})}),h=(a,l,s)=>{const e=s/2,n=s/2-30;if(l.length===1)return{x:e,y:e};let t=-90;for(let y=0;y<a;y++){const $=l[y].amount/l.reduce((I,C)=>I+C.amount,0);t+=$*360}const r=l[a].amount/l.reduce((y,$)=>y+$.amount,0),c=t+r*360/2,_=e+n*Math.cos(c*Math.PI/180),v=e+n*Math.sin(c*Math.PI/180);return{x:_,y:v}},m=a=>({food:"üçΩÔ∏è",drinks:"ü•§",transportation:"üöó",shopping:"üõçÔ∏è",entertainment:"üéÆ",medical:"üíä",education:"üìö",income:"üí∞",utilities:"‚ö°",health:"‚öïÔ∏è",other:"üí°"})[a]||"üìä";return(a,l)=>(p(),d("div",q,[l[0]||(l[0]=o("div",{class:"chart-header"},[o("h3",null,"ÊîØÂá∫ÂàÜÈ°û")],-1)),o("div",G,[a.totalExpense>0?(p(),d("svg",H,[(p(!0),d(b,null,w(u.value,(s,e)=>(p(),d("g",{key:e},[o("path",{d:s.path,fill:s.color,class:"pie-slice",stroke:"none"},null,8,J)]))),128)),(p(!0),d(b,null,w(a.categoryStats.slice(0,3),(s,e)=>(p(),d("g",{key:`icon-${s.category}`},[o("text",{x:h(e,a.categoryStats,200).x,y:h(e,a.categoryStats,200).y,class:"chart-icon-text",fill:s.color},f(m(s.category)),9,K)]))),128))])):(p(),d("div",Q," ÁÑ°ÊîØÂá∫Êï∏Êìö "))]),o("div",tt,[(p(!0),d(b,null,w(a.categoryStats,(s,e)=>(p(),d("div",{key:s.category,class:"legend-item"},[o("div",{class:"legend-color",style:P({backgroundColor:s.color})},null,4),o("span",et,f(s.name),1),o("span",nt,f(s.percentage)+"%",1)]))),128))])]))}}),at=x(ot,[["__scopeId","data-v-3dfd3dfa"]]),st={class:"monthly-report-page"},lt=S({__name:"MonthlyReportView",setup(M){const i=A(),u=k(new Date().toISOString().slice(0,7)),h=g(()=>i.transactions.filter(e=>e.date.startsWith(u.value))),m=g(()=>h.value.filter(e=>e.type==="income").reduce((e,n)=>e+n.amount,0)),a=g(()=>h.value.filter(e=>e.type==="expense").reduce((e,n)=>e+n.amount,0)),l=g(()=>m.value-a.value);g(()=>{const e={};return h.value.filter(n=>n.type==="expense").forEach(n=>{const t=n.date.split("-")[2];e[t]=(e[t]||0)+n.amount}),e});const s=g(()=>{const e={};h.value.filter(t=>t.type==="expense").forEach(t=>{const r=i.categories.find(c=>c.id===t.category);e[t.category]||(e[t.category]={amount:0,name:r?.name||t.category,color:r?.color||"#ccc"}),e[t.category].amount+=t.amount});const n=a.value;return Object.keys(e).map(t=>({category:t,name:e[t].name,amount:e[t].amount,color:e[t].color,percentage:n>0?Math.round(e[t].amount/n*100):0})).sort((t,r)=>r.amount-t.amount)});return(e,n)=>(p(),d("div",st,[V(F,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t)},null,8,["modelValue"]),V(Z,{"total-income":m.value,"total-expense":a.value,balance:l.value},null,8,["total-income","total-expense","balance"]),V(at,{"category-stats":s.value,"total-expense":a.value},null,8,["category-stats","total-expense"])]))}}),ct=x(lt,[["__scopeId","data-v-b0be2e8c"]]);export{ct as default};
